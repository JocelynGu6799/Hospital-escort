"use strict";function t(t){t=l(t);const e=(t=new Date(t)).getFullYear(),a=t.getMonth()+1,i=t.getDate();return`${e}-${s(a)}-${s(i)}`}function e(t,e){t=l(t);const a=(t=new Date(t)).getHours(),i=t.getMinutes(),r=t.getSeconds();return e?`${s(a)}:${s(i)}`:`${s(a)}:${s(i)}:${s(r)}`}function s(t){return t<10&&(t=`0${t}`),t}function a(t,e){return(t=new Date(l(t)))<=(e=new Date(l(e)))}const i=/^\d{4}-(0?[1-9]|1[012])-(0?[1-9]|[12][0-9]|3[01])( [0-5]?[0-9]:[0-5]?[0-9](:[0-5]?[0-9])?)?$/;function l(t){return"string"==typeof t&&i.test(t)&&(t=t.replace(/-/g,"/")),t}exports.Calendar=class{constructor({selected:t,startDate:e,endDate:s,range:a}={}){this.date=this.getDateObj(new Date),this.selected=t||[],this.startDate=e,this.endDate=s,this.range=a,this.cleanMultipleStatus(),this.weeks={},this.lastHover=!1}setDate(t){const e=this.getDateObj(t);this.getWeeks(e.fullDate)}cleanMultipleStatus(){this.multipleStatus={before:"",after:"",data:[]}}setStartDate(t){this.startDate=t}setEndDate(t){this.endDate=t}getPreMonthObj(t){t=l(t);const e=(t=new Date(t)).getMonth();t.setMonth(e-1);const s=t.getMonth();return 0!==e&&s-e==0&&t.setMonth(s-1),this.getDateObj(t)}getNextMonthObj(t){t=l(t);const e=(t=new Date(t)).getMonth();t.setMonth(e+1);const s=t.getMonth();return s-e>1&&t.setMonth(s-1),this.getDateObj(t)}getDateObj(e){return e=l(e),{fullDate:t(e=new Date(e)),year:e.getFullYear(),month:s(e.getMonth()+1),date:s(e.getDate()),day:e.getDay()}}getPreMonthDays(t,e){const s=[];for(let a=t-1;a>=0;a--){const t=e.month-1;s.push({date:new Date(e.year,t,-a).getDate(),month:t,disable:!0})}return s}getCurrentMonthDays(t,e){const i=[],l=this.date.fullDate;for(let r=1;r<=t;r++){const t=`${e.year}-${e.month}-${s(r)}`,u=l===t,h=this.selected&&this.selected.find((e=>{if(this.dateEqual(t,e.date))return e}));this.startDate&&a(this.startDate,t),this.endDate&&a(t,this.endDate);let n=this.multipleStatus.data,o=-1;this.range&&n&&(o=n.findIndex((e=>this.dateEqual(e,t))));const D=-1!==o;i.push({fullDate:t,year:e.year,date:r,multiple:!!this.range&&D,beforeMultiple:this.isLogicBefore(t,this.multipleStatus.before,this.multipleStatus.after),afterMultiple:this.isLogicAfter(t,this.multipleStatus.before,this.multipleStatus.after),month:e.month,disable:this.startDate&&!a(this.startDate,t)||this.endDate&&!a(t,this.endDate),isToday:u,userChecked:!1,extraInfo:h})}return i}_getNextMonthDays(t,e){const s=[],a=e.month+1;for(let i=1;i<=t;i++)s.push({date:i,month:a,disable:!0});return s}getInfo(t){return t||(t=new Date),this.calendar.find((e=>e.fullDate===this.getDateObj(t).fullDate))}dateEqual(t,e){return t=new Date(l(t)),e=new Date(l(e)),t.valueOf()===e.valueOf()}isLogicBefore(t,e,s){let i=e;return e&&s&&(i=a(e,s)?e:s),this.dateEqual(i,t)}isLogicAfter(t,e,s){let i=s;return e&&s&&(i=a(e,s)?s:e),this.dateEqual(i,t)}geDateAll(t,e){var s=[],a=t.split("-"),i=e.split("-"),l=new Date;l.setFullYear(a[0],a[1]-1,a[2]);var r=new Date;r.setFullYear(i[0],i[1]-1,i[2]);for(var u=l.getTime()-864e5,h=r.getTime()-864e5,n=u;n<=h;)n+=864e5,s.push(this.getDateObj(new Date(parseInt(n))).fullDate);return s}setMultiple(t){if(!this.range)return;let{before:e,after:s}=this.multipleStatus;if(e&&s){if(!this.lastHover)return void(this.lastHover=!0);this.multipleStatus.before=t,this.multipleStatus.after="",this.multipleStatus.data=[],this.multipleStatus.fulldate="",this.lastHover=!1}else e?(this.multipleStatus.after=t,a(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before),this.lastHover=!0):(this.multipleStatus.before=t,this.multipleStatus.after=void 0,this.lastHover=!1);this.getWeeks(t)}setHoverMultiple(t){if(!this.range||this.lastHover)return;const{before:e}=this.multipleStatus;e?(this.multipleStatus.after=t,a(this.multipleStatus.before,this.multipleStatus.after)?this.multipleStatus.data=this.geDateAll(this.multipleStatus.before,this.multipleStatus.after):this.multipleStatus.data=this.geDateAll(this.multipleStatus.after,this.multipleStatus.before)):this.multipleStatus.before=t,this.getWeeks(t)}setDefaultMultiple(t,e){this.multipleStatus.before=t,this.multipleStatus.after=e,t&&e&&(a(t,e)?(this.multipleStatus.data=this.geDateAll(t,e),this.getWeeks(e)):(this.multipleStatus.data=this.geDateAll(e,t),this.getWeeks(t)))}getWeeks(t){const{year:e,month:s}=this.getDateObj(t),a=new Date(e,s-1,1).getDay(),i=this.getPreMonthDays(a,this.getDateObj(t)),l=new Date(e,s,0).getDate(),r=42-a-l,u=[...i,...this.getCurrentMonthDays(l,this.getDateObj(t)),...this._getNextMonthDays(r,this.getDateObj(t))],h=new Array(6);for(let n=0;n<u.length;n++){const t=Math.floor(n/7);h[t]||(h[t]=new Array(7)),h[t][n%7]=u[n]}this.calendar=u,this.weeks=h}},exports.checkDate=function(t){return t.match(/((19|20)\d{2})(-|\/)\d{1,2}(-|\/)\d{1,2}/g)},exports.dateCompare=a,exports.fixIosDateFormat=l,exports.getDate=t,exports.getDateTime=function(s,a){return`${t(s)} ${e(s,a)}`},exports.getDefaultSecond=function(t){return t?"00:00":"00:00:00"},exports.getTime=e;
