"use strict";const t=require("../../../../../common/vendor.js"),e="load",a="error",i={name:"AdInteractive",props:{options:{type:[Object,Array],default:()=>({})},disabled:{type:[Boolean,String],default:!1},adpid:{type:[Number,String],default:""},openType:{type:String,default:"interactive"},openPagePath:{type:String,default:""}},data:()=>({adData:null,loading:!1,errorMessage:""}),created(){this._interactiveUrl=null,this.openPagePath&&this.getAdData()},methods:{getAdData(){this.adpid?(this.loading=!0,t.index.request({url:"https://wxac1.dcloud.net.cn/openPage/acs",method:"POST",data:{adpid:this.adpid},timeout:5e3,dataType:"json",success:t=>{if(200!==t.statusCode)return void this.$emit(a,{errCode:t.statusCode,errMsg:t.statusCode});const i=t.data;if(0===i.ret)this._interactiveUrl=i.data.adp_url,this.adData={imgUrl:i.data.icon_url,openPath:this.openPagePath+"?url="+encodeURIComponent(this._interactiveUrl)},this.$emit(e,this.adData);else{const t={errCode:i.ret,errMsg:i.msg};this.errorMessage=t,this.$emit(a,t)}},fail:t=>{this.$emit(a,{errCode:"",errMsg:t.errMsg})},complete:()=>{this.loading=!1}})):this.$emit(a,{code:-5002,message:"invalid adpid"})},onclick(){this.disabled||this._interactiveUrl&&(t.index.navigateTo({url:this.adData.openPath}),this._report())},_report(){t.index.request({url:"https://wxac1.dcloud.net.cn/openPage/acs",data:{adpid:this.adpid,t:"10019"},timeout:5e3,dataType:"json"})}}};const r=t._export_sfc(i,[["render",function(e,a,i,r,d,s){return{a:t.r("d",{options:i.options,data:d.adData,loading:d.loading,error:d.errorMessage}),b:t.o(((...t)=>s.onclick&&s.onclick(...t)))}}]]);wx.createComponent(r);
