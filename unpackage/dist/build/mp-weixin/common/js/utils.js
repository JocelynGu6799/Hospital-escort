"use strict";const e=require("../vendor.js");const i=new class{constructor(){this.baseUrl="http://159.75.169.224:7300/pz"}getUserInfo(){e.index.login({success:e=>{console.log("userinfo",e),this.myrequest({myurl:"/auth/wxLogin",data:{code:e.code},mysuccess:e=>{console.log("我的成功数据",e)}})}})}myrequest(i={myloading:!1}){if(!i.myurl)return console.log("请求错误"),!1;i.myloading&&(this.showmyLoading(),e.index.setStorageSync("ifloading",!0)),e.index.request({url:this.baseUrl+i.myurl,data:i.data?i.data:{},header:i.header?i.header:{},method:i.method?i.method:"GET",success:o=>{e.index.hideLoading(),e.index.setStorageSync("ifloading",!1),1e4!==o.data.code?i.myfail&&"function"==typeof i.myfail&&i.myfail(o):i.mysuccess&&"function"==typeof i.mysuccess&&i.mysuccess(o.data)},fail:o=>{i.myfail(o),e.index.hideLoading(),e.index.setStorageSync("ifloading",!1)}})}showmyLoading(){e.index.getStorageSync("ifloading")&&e.index.hideLoading(),e.index.showLoading({title:"正在努力加载中..."})}};exports.Utils=i;
